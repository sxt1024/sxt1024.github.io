## 键盘扫描码

### 通码和断码

每次按下键盘时，会触发2次中断事件。

按键按下时，中断接收的编码为通码。如果一直按住，则中断不断产生持续相同的通码。称为makecode

按键释放时，中断接收的编码为断码。称为breakcode



### 键盘扫描码

键盘扫描码有三套方案

1. XT键盘扫描码方案
2. AT键盘扫描码方案
3. IBM高端键盘方案



第一套键盘扫描码

### 主键盘 scan code 表

| value| key | shift key   | mark |break |
| ----------- | -------- | --------- | ------- |------ |
| 00|         | | 00      | 00        |
| 01| <ESC>   |      | 01      | a9        |
| 02|1  |   !      | 02       | 82        |
| 03| 2    |   @    | 03       | 83        |
| 04| #  |3         | 04       | 84        |
| 05| 4  |   $      | 05       | 85        |
| 06| 5   |   %     | 06       | 86        |
| 07| 6   |   ^     | 07       | 87        |
| 08|  7  |   &     | 08       | 88        |
| 09| 8    |  *     | 09       | 89        |
|0A|9     |  (    | 0A       | 8A        |
| 0B|0    |    )   | 0B       | 8B        |
| 0C|  -  | _      | 0C      | 8C        |
| 0D|  = |  +        | 0D      | 8D        |
| 0E|  <Backspace>  |          | 0E      | 8E       |
| 0F| <tab>   |  | 0F      | 8F       |
| 10 | q      | Q   | 10       | 90        |
| 11  | w    | W | 11       | 91        |
| 12   | e   | E | 12       | 12        |
| 13   | r    | R | 13       | 93        |
| 14   | t   | T | 14       | 94        |
| 15    | y | Y | 15       | 95        |
| 16    | u | U | 16       | 96        |
| 17   | i  | I | 17       | 97        |
| 18  | o    | O | 18       | 98        |
| 19 | p   | P | 19       | 99        |
| 1A  | [   |   {  | 1A      | 9A        |
| 1B   | ]  |    }  | 1B      | 9B        |
| 1C    | <Enter>     |        | 1C    |9C|
|     1D        |  <Ctrl-L>        |          |  1D    | 9D     |
|     1E        | a       | A | 1E       | 9E        |
|     1F      | s        | S | 1F       | 9F        |
|     20      | d        | D | 20       | a0        |
|     21     | f         | F | 21       | a1        |
|     22     | g        | G | 22       | a2        |
|     23      | h       | H | 23       | a3        |
|     24     | j         | J | 24       | a4        |
|     25      | k       | K | 25       | a5        |
|     26     | l        | L | 26       | a6        |
|     27  |   ;      |   :    | 27       | a7        |
|     28    |  '  |  "     | 28       | a8        |
|     29     | ` |  ~       | 29       | a9        |
| 2A       | <Shift-L> | | 2a       | aa        |
| 2B    |  `\` | `| ` | 2B    | AB      |
| 2C      |z       | Z | 2c       | ac        |
| 2D | x       | X | 2d       | ad        |
| 2E| c       | C | 2e       | ae        |
| 2F| v      | V | 2f      | af       |
| 30| b     | B | 30       | B0      |
| 31| n         | N      | 31      |b1|
| 32| m         | M      | 32      |b2|
| 33| ,   |   <   | 33       | b3        |
| 34| .    |  > | 34       | b4        |
| 35| /    | ?   | 35       | b5        |
| 36| <Shift-R>|  | 36       | b6        |
| 38| <Alt-L>  |  | 38       | b8        |
| 39|<Space>   |  | 39       | b9        |




### 功能键 scan code 表

| **key** | **mark（Hex）** | **break（Hex）** |
| ------- | --------------- | ---------------- |
| 数字键* | 37              | b7               |
| CapsLock      | 3A          | bA            |
| F1      | 3b              | bb               |
| F2      | 3c              | bc               |
| F3      | 3d              | bd               |
| F4      | 3e              | be               |
| F5      | 3f              | bf               |
| F6      | 40              | c0               |
| F7      | 41              | c1               |
| F8      | 42              | c2               |
| F9      | 43              | c3               |
| F10     | 44              | c4               |
| NumLock | 45              | c5               |
| Scroll Lock       | 46                | c6               |
| 数字键7 | 47              | c7               |
| 数字键8 | 48              | c8               |
| 数字键9 | 49              | c9               |
| 数字键-    | 4a              | ca               |
| 数字键4 | 4b              | cb               |
| 数字键5    | 4c              | cc               |
| 数字键6 | 4d              | cd               |
| 数字键+    | 4e              | ce               |
| 数字键1 | 4f              | cf               |
| 数字键2 | 50              | d0               |
| 数字键3 | 51              | d1               |
| 数字键0 | 52              | d2               |
| 数字键. | 53              | d3               |
| SysReq| 54            | d4          |
| F11     | 57              | d7               |
| F12     | 58              | d8               |




### 附加键 scan code 表

| **key**           | **mark（Hex）**   | **break（Hex）** | **描述**         |
| ----------------- | ----------------- | ---------------- | ---------------- |
| Enter   | e0  1c          | e0 9c           | extend scan code              |
| <R-ctrl>  | e0 1d    | e0 9d     |   |
| <R-alt>   | e0 38    | e0 b8     |   |
| left ←            | e0 46             | e0 c6            | 同上             |
| Home              | e0 47             | e0 c7            | 同上             |
| up ↑              | e0 48             | e0 c8            | 同上             |
| Page Up           | e0 49             | e0 c9            | 同上             |
| right →           | e0 4d             | e0 cd            | 同上             |
| End               | e0 4f             | e0 cf            | 同上             |
| down ↓            | e0 50             | e0 d0            | 同上             |
| Page Down         | e0 51             | e0 d1            | 同上             |
| Insert            | e0 52             | e0 d2            | 同上             |
| Delete            | e0 53             | e0 d3            | 同上             |
| PrintScreen/SysRq | e0, 2a, e0, 37    | e0, b7, e0, aa   | extend scan code |
| Pause/Break       | e1 1d 45 e1 9d c5 | *                | 同上             |
| /       | e0 35           | e0 b5            | 由 e0 引导出 extend scan code |