---
title: 1.4 Arch搭建Nas系统之四：网络共享
date: 2024-10-01T12:27:28
lastmod: 2024-10-30
timezone: UTC+8
tags:
  - nas
categories: nas
draft: false
---

## 4.1 安装Samba服务

**4.1.1 安装配置Samba**

a）安装samba

```
sudo pacman -S samba
```

b) 配置samba

配置samba

```
vim /etc/samba/smb.conf

[global]
    workgroup = WORKGROUP
    server string = archnas
    security = user
    map to guest = Bad User
    guest account = archnas

[data]
    comment = data
    path = /data
    public = yes
    browseable = yes
    read only = yes
    available = yes
    guest ok = yes
    read list = nobody
    write list = archnas
```

c）检查配置

检查smb配置

```
testparm
```

d) 启用服务

```
sudo systemctl restart nmb && sudo systemctl enable nmb
sudo systemctl restart smb && sudo systemctl enable smb
```

**4.1.2安装配置WSDD**

安装wsdd。这样windows无法可以在网络发现nas主机。

```
pacman -S wsdd
sudo systemctl restart wsdd && sudo systemctl enable wsdd
```

### 4.2 安装Rsync服务：

**4.2.2 安装配置Rsync**

a) 安装rsync

```
sudo pacman -S rsync
```

b) 同步上传到远程rsync服务器

例如，

1) 同步当前Nas服务器的/data/books目录，到远程服务器的 /data目录
```
rsync -av --progress /data/books archnas@192.168.10.228:/data/
```


2) 同步当前Nas服务器的/data/books目录，到远程服务器的 /data目录(并且同步删除本地没有的文件)

```
rsync -av --delete --progress /data/books archnas@192.168.10.228:/data/
```
