---
title: 1.11 Arch搭建Nas系统之十一：家居物联
date: 2024-10-01T12:27:28
lastmod: 2024-10-30
timezone: UTC+8
tags:
  - nas
categories: nas
draft: false
---

## 安装homeassistant
mkdir -p /nas/homeassistant


vim /nas/homeassistant/docker-compose.yml
---
services:
  homeassistant:
    image: lscr.io/linuxserver/homeassistant:latest
    container_name: homeassistant
    network_mode: host
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Asia/Shanghai
    volumes:
      - /nas/homeassistant/data:/config
    ports:
      - 8123:8123 #optional
    restart: unless-stopped


运行：

> cd /nas/homeassistant/
> sudo docker-compose up -d

访问管理后台地址：http://192.168.10.222:8123/

## 安装shinobi

mkdir -p /nas/shinobi
vim /nas/shinobi/docker-compose.yml

```
version: "3"
services:
    shinobi:
        image: shinobisystems/shinobi:dev
        container_name: shinobi
        environment:
           - PLUGIN_KEYS={"Tensorflow":"92a809b0533cb64e033131f8e60ae"}
           - SSL_ENABLED=false
        volumes:
           - /nas/shinobi/config:/config
           - /nas/shinobi/customAutoLoad:/home/Shinobi/libs/customAutoLoad
           - /nas/shinobi/database:/var/lib/mysql
           - /nas/shinobi/videos:/home/Shinobi/videos
           - /nas/shinobi/plugins:/home/Shinobi/plugins
           - /dev/shm/shinobi/streams:/dev/shm/streams
           - /etc/localtime:/etc/localtime:ro
        ports:
           - 8680:8080
        restart: unless-stopped

    shinobiplugintensorflow:
        image: shinobisystems/shinobi-tensorflow:latest
        container_name: shinobi-tensorflow
        environment:
          - PLUGIN_KEY=92a809b0533cb64e033131f8e60ae
          - PLUGIN_HOST=shinobi
        volumes:
          - /nas/shinobi/docker-plugins/tensorflow:/config
        restart: unless-stopped
```
运行：

> docker-compose up -d


访问管理后台地址：http://192.168.10.222:8680/super

Default Superuser : admin@shinobi.video
Default Password : admin

accounts -》创建普通用户

sxt102400@outlook.com

访问监控后台地址：[http://192.168.10.222:8680/](http://192.168.10.222:8680/)

使用刚才创建的用户登录


刚才创建的用户

点击用户名-ONVIFG

添加ONVIF,IP为NVR地址,

用户名密码为设置好的ONVIF管理员的用户名和密码,填写完直接搜索